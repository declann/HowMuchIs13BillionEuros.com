const d="\u037C",m=typeof Symbol>"u"?"__"+d:Symbol.for(d),S=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class A{constructor(e,s){this.rules=[];let{finish:o}=s||{};function i(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function l(t,r,n,a){let c=[],f=/^@(\w+)\b/.exec(t[0]),g=f&&f[1]=="keyframes";if(f&&r==null)return n.push(t[0]+";");for(let h in r){let u=r[h];if(/&/.test(h))l(h.split(/,\s*/).map(y=>t.map(p=>y.replace(/&/,p))).reduce((y,p)=>y.concat(p)),u,n);else if(u&&typeof u=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");l(i(h),u,c,g)}else u!=null&&c.push(h.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+u+";")}(c.length||g)&&n.push((o&&!f&&!a?t.map(o):t).join(", ")+" {"+c.join(" ")+"}")}for(let t in e)l(i(t),e[t],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=w[m]||1;return w[m]=e+1,d+e.toString(36)}static mount(e,s,o){let i=e[S],l=o&&o.nonce;i?l&&i.setNonce(l):i=new x(e,l),i.mount(Array.isArray(s)?s:[s],e)}}let b=new Map;class x{constructor(e,s){let o=e.ownerDocument||e,i=o.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let l=b.get(o);if(l)return e[S]=l;this.sheet=new i.CSSStyleSheet,b.set(o,this)}else this.styleTag=o.createElement("style"),s&&this.styleTag.setAttribute("nonce",s);this.modules=[],e[S]=this}mount(e,s){let o=this.sheet,i=0,l=0;for(let t=0;t<e.length;t++){let r=e[t],n=this.modules.indexOf(r);if(n<l&&n>-1&&(this.modules.splice(n,1),l--,n=-1),n==-1){if(this.modules.splice(l++,0,r),o)for(let a=0;a<r.rules.length;a++)o.insertRule(r.rules[a],i++)}else{for(;l<n;)i+=this.modules[l++].rules.length;i+=r.rules.length,l++}}if(o)s.adoptedStyleSheets.indexOf(this.sheet)<0&&(s.adoptedStyleSheets=[this.sheet,...s.adoptedStyleSheets]);else{let t="";for(let n=0;n<this.modules.length;n++)t+=this.modules[n].getRules()+`
`;this.styleTag.textContent=t;let r=s.head||s;this.styleTag.parentNode!=r&&r.insertBefore(this.styleTag,r.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}export{A as StyleModule};
